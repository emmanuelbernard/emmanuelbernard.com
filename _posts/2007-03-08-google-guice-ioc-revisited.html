---
title: 'Google Guice: IoC revisited'
author: 'Emmanuel Bernard'
tags: [ ioc, java ]
date: 2007-03-08
---
<p>Google has made public his IoC container. It's all annotations based, no more strings, no more XML.<br/><br/>Some key concepts:<br/><ul><li>Avoid string based injection which are error prone and hard to refactor<br/></li><li>@Inject actually inject :-)</li><li>@ImplementedBy(ServiceImpl.class). A service can have a default implementation, use by default when no wiring is explicit. The actual implementation is easily identified, including by your IDE...</li><li>Injection through custom annotations (even parameterized): useful when you need to bind 2 services implementations and use one or the other. Also useful to bind constants: Guice allows you to bind a constant to an annotation.<br/></li><li>Scoping: injections are scoped, and you can create you own scope (transaction). Inner scopes can see outer scopes.</li><li>Because it's Bob Lee: Guice has integration with AOP Alliance is supported<br/></li></ul>Here are some examples:<br/>Basic injection<br/><blockquote>     public class Client {<br/>  private final Service service;<br/><br/>  <span style='font-weight: bold;'>@Inject</span><br/>  public Client(Service service) {<br/> this.service = service;<br/>  }<br/><br/>  public void go() {<br/> service.go();<br/>}<br/>}</blockquote><br/><br/>Default for autowiring<br/><blockquote/><blockquote><span style='font-weight: bold;'/><span style='font-weight: bold;'>@ImplementedBy(ServiceImpl.class)</span><br/>public interface Service {<br/> void go();<br/>}</blockquote><br/>Custom annotations<br/><span style='font-family:Courier New;'/><blockquote><span style='font-family:Courier New;'>bind(Service.class)</span><span style='font-family:Courier New;'><span style='font-weight: bold;'><br/>      .annotatedWith(Blue.class)</span></span><span style='font-family:Courier New;'><br/>  .to(BlueService.class);<br/><br/>...<br/></span><span style='font-family:Courier New;'><br/></span>     @Inject<br/>void injectService(<span style='font-weight: bold;'>@Blue</span> Service     service) {<br/> ...<br/>}</blockquote><br/><br/>What I really like:<br/><ul><li>Annotation based, easy to read and concise<br/></li><li>Injection on methods (not only setters)</li><li>@ImplementedBy: Most services, they are implemented one and only one time.</li></ul><br/>I remember the old days of Pico vs Spring vs Avalon. I'm happy to see innovation flowing again in this field. Some took for granted that Spring was the only way, then come annotations. <a href='http://labs.jboss.com/portal/jbossseam'>JBoss Seam</a> and its annotation based stateful injection / outjection, and now <a href='http://code.google.com/p/google-guice/'>Google Guice</a>: both share some of the interesting concepts I described earlier. Component injection is revisited and it's good.<br/><br/>Now remember, IoC is not application development, it's at best a part of it :-). To me, the programmation model with the biggest/homogeneous picture is JBoss Seam.</p>
